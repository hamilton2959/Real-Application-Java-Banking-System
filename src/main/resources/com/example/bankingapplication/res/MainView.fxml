<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<?import javafx.collections.FXCollections?>
<?import java.lang.String?>
<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.bankingapplication.controllers.AccountController"
            stylesheets="@../../css/styles.css"
            minWidth="800" minHeight="600"
            prefWidth="1200" prefHeight="700">

    <!-- Top: Header -->
    <top>
        <VBox styleClass="header">
            <HBox alignment="CENTER_LEFT" spacing="15">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>
                <Label text="ðŸ¦" style="-fx-font-size: 32px;"/>
                <VBox HBox.hgrow="ALWAYS">
                    <Label text="Banking System" styleClass="header-title">
                        <font>
                            <Font name="System Bold" size="24"/>
                        </font>
                    </Label>
                    <Label text="Account Management Dashboard" styleClass="header-subtitle">
                        <font>
                            <Font size="12"/>
                        </font>
                    </Label>
                </VBox>
            </HBox>
            <Separator/>
        </VBox>
    </top>

    <!-- Center: Main Content -->
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="main-tabpane" VBox.vgrow="ALWAYS">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>

            <!-- Tab 1: Account Management -->
            <Tab text="ðŸ“‹ Account Management">
                <ScrollPane fitToWidth="true" fitToHeight="true" hbarPolicy="NEVER">
                    <VBox spacing="15" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <!-- Account Form -->
                        <TitledPane text="Account Details" collapsible="false" styleClass="form-section">
                            <GridPane hgap="15" vgap="12">
                                <padding>
                                    <Insets top="15" right="15" bottom="15" left="15"/>
                                </padding>

                                <!-- Row 0: Account Number (Read-only) -->
                                <Label text="Account Number:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="form-label"/>
                                <TextField fx:id="accountNumberField" promptText="Auto-generated" editable="false"
                                           styleClass="readonly-field" GridPane.columnIndex="1" GridPane.rowIndex="0"
                                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <Label text="Account Status:" GridPane.columnIndex="2" GridPane.rowIndex="0" styleClass="form-label"/>
                                <ComboBox fx:id="statusCombo" maxWidth="Infinity"
                                          GridPane.columnIndex="3" GridPane.rowIndex="0" GridPane.hgrow="ALWAYS"/>

                                <!-- Row 1: Account Holder & Type -->
                                <Label text="*Account Holder Name:" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="form-label"/>
                                <TextField fx:id="accountHolderField" promptText="Enter full name"
                                           GridPane.columnIndex="1" GridPane.rowIndex="1"
                                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <Label text="*Account Type:" GridPane.columnIndex="2" GridPane.rowIndex="1" styleClass="form-label"/>
                                <ComboBox fx:id="accountTypeCombo" promptText="Select type" maxWidth="Infinity"
                                          GridPane.columnIndex="3" GridPane.rowIndex="1" GridPane.hgrow="ALWAYS"/>

                                <!-- Row 2: Balance & Opening Date -->
                                <Label text="Initial Balance:" GridPane.columnIndex="0" GridPane.rowIndex="2" styleClass="form-label"/>
                                <TextField fx:id="balanceField" promptText="0.00"
                                           GridPane.columnIndex="1" GridPane.rowIndex="2"
                                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <Label text="Opening Date:" GridPane.columnIndex="2" GridPane.rowIndex="2" styleClass="form-label"/>
                                <DatePicker fx:id="openingDatePicker" maxWidth="Infinity"
                                            GridPane.columnIndex="3" GridPane.rowIndex="2" GridPane.hgrow="ALWAYS"/>

                                <!-- Row 3: Email & Phone -->
                                <Label text="Email Address:" GridPane.columnIndex="0" GridPane.rowIndex="3" styleClass="form-label"/>
                                <TextField fx:id="emailField" promptText="email@example.com"
                                           GridPane.columnIndex="1" GridPane.rowIndex="3"
                                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <Label text="Phone Number:" GridPane.columnIndex="2" GridPane.rowIndex="3" styleClass="form-label"/>
                                <TextField fx:id="phoneField" promptText="+254 700 000000"
                                           GridPane.columnIndex="3" GridPane.rowIndex="3"
                                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <!-- Row 4: Address (Full Width) -->
                                <Label text="Address:" GridPane.columnIndex="0" GridPane.rowIndex="4" styleClass="form-label"
                                       GridPane.valignment="TOP">
                                    <padding>
                                        <Insets top="8"/>
                                    </padding>
                                </Label>
                                <TextArea fx:id="addressArea" promptText="Enter full address" prefRowCount="2"
                                          wrapText="true" GridPane.columnIndex="1" GridPane.rowIndex="4" GridPane.columnSpan="3"
                                          maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <columnConstraints>
                                    <ColumnConstraints minWidth="120" percentWidth="18"/>
                                    <ColumnConstraints minWidth="150" percentWidth="32" hgrow="ALWAYS"/>
                                    <ColumnConstraints minWidth="120" percentWidth="18"/>
                                    <ColumnConstraints minWidth="150" percentWidth="32" hgrow="ALWAYS"/>
                                </columnConstraints>
                            </GridPane>
                        </TitledPane>

                        <!-- Action Buttons -->
                        <HBox spacing="10" alignment="CENTER">
                            <padding>
                                <Insets top="10" bottom="10"/>
                            </padding>
                            <Button fx:id="addButton" text="âž• Add Account" onAction="#handleCreateAccount"
                                    styleClass="btn-success" minWidth="120" prefWidth="140"/>
                            <Button fx:id="updateButton" text="âœï¸ Update Account" onAction="#handleUpdateAccount"
                                    styleClass="btn-warning" minWidth="120" prefWidth="140"/>
                            <Button fx:id="deleteButton" text="ðŸ—‘ï¸ Delete Account" onAction="#handleDeleteAccount"
                                    styleClass="btn-danger" minWidth="120" prefWidth="140"/>
                            <Button fx:id="clearButton" text="ðŸ”„ Clear Form" onAction="#handleClear"
                                    styleClass="btn-secondary" minWidth="120" prefWidth="140"/>
                        </HBox>

                        <!-- Accounts Table -->
                        <TitledPane text="All Accounts" collapsible="false" styleClass="table-section"
                                    VBox.vgrow="ALWAYS" maxHeight="Infinity">
                            <TableView fx:id="accountTable" VBox.vgrow="ALWAYS" maxHeight="Infinity">
                                <columns>
                                    <TableColumn fx:id="idColumn" text="ID" minWidth="50" prefWidth="60"/>
                                    <TableColumn fx:id="accountNumberColumn" text="Account Number" minWidth="120" prefWidth="150"/>
                                    <TableColumn fx:id="holderNameColumn" text="Account Holder" minWidth="150" prefWidth="180"/>
                                    <TableColumn fx:id="accountTypeColumn" text="Type" minWidth="100" prefWidth="120"/>
                                    <TableColumn fx:id="balanceColumn" text="Balance (KES)" minWidth="100" prefWidth="130"/>
                                    <TableColumn fx:id="openingDateColumn" text="Opening Date" minWidth="100" prefWidth="120"/>
                                    <TableColumn fx:id="statusColumn" text="Status" minWidth="80" prefWidth="100"/>
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                                </columnResizePolicy>
                            </TableView>
                        </TitledPane>

                        <!-- Help Text -->
                        <HBox styleClass="help-box" spacing="10" alignment="CENTER_LEFT">
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            <Label text="â„¹ï¸" style="-fx-font-size: 16px;"/>
                            <Label text="* Required fields | Select a row in the table to edit or delete | Clear form to add new account"
                                   wrapText="true" styleClass="help-text" HBox.hgrow="ALWAYS"/>
                        </HBox>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- Tab 2: Transactions -->
            <Tab text="ðŸ’° Transactions">
                <ScrollPane fitToWidth="true" fitToHeight="true" hbarPolicy="NEVER">
                    <VBox spacing="15" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <!-- Transaction Operations -->
                        <TitledPane text="Transaction Operations" collapsible="false" styleClass="form-section">
                            <VBox spacing="15">
                                <padding>
                                    <Insets top="15" right="15" bottom="15" left="15"/>
                                </padding>

                                <!-- Deposit/Withdraw Section -->
                                <GridPane hgap="10" vgap="10">
                                    <Label text="Account Number:" GridPane.columnIndex="0" GridPane.rowIndex="0"
                                           styleClass="form-label" minWidth="120"/>
                                    <TextField fx:id="txnAccountField" promptText="ACC-YYYYMMDD-XXXX"
                                               GridPane.columnIndex="1" GridPane.rowIndex="0"
                                               maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>
                                    <Label text="Amount (KES):" GridPane.columnIndex="2" GridPane.rowIndex="0"
                                           styleClass="form-label" minWidth="100"/>
                                    <TextField fx:id="txnAmountField" promptText="0.00"
                                               GridPane.columnIndex="3" GridPane.rowIndex="0"
                                               maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>
                                    <Button text="ðŸ’µ Deposit" styleClass="btn-success" minWidth="110" prefWidth="120"
                                            GridPane.columnIndex="4" GridPane.rowIndex="0"/>
                                    <Button text="ðŸ’¸ Withdraw" styleClass="btn-warning" minWidth="110" prefWidth="120"
                                            GridPane.columnIndex="5" GridPane.rowIndex="0"/>

                                    <columnConstraints>
                                        <ColumnConstraints minWidth="120" prefWidth="120"/>
                                        <ColumnConstraints minWidth="150" percentWidth="25" hgrow="ALWAYS"/>
                                        <ColumnConstraints minWidth="100" prefWidth="100"/>
                                        <ColumnConstraints minWidth="150" percentWidth="25" hgrow="ALWAYS"/>
                                        <ColumnConstraints minWidth="110" prefWidth="120"/>
                                        <ColumnConstraints minWidth="110" prefWidth="120"/>
                                    </columnConstraints>
                                </GridPane>

                                <Separator/>

                                <!-- Transfer Section -->
                                <Label text="Transfer Between Accounts" styleClass="section-title">
                                    <font>
                                        <Font name="System Bold" size="14"/>
                                    </font>
                                </Label>
                                <GridPane hgap="10" vgap="10">
                                    <Label text="From Account:" GridPane.columnIndex="0" GridPane.rowIndex="0"
                                           styleClass="form-label"/>
                                    <TextField fx:id="fromAccountField" promptText="Source account"
                                               GridPane.columnIndex="0" GridPane.rowIndex="1"
                                               maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                    <Label text="â†’" style="-fx-font-size: 24px; -fx-text-fill: #3498db;"
                                           GridPane.columnIndex="1" GridPane.rowIndex="1" GridPane.halignment="CENTER"/>

                                    <Label text="To Account:" GridPane.columnIndex="2" GridPane.rowIndex="0"
                                           styleClass="form-label"/>
                                    <TextField fx:id="toAccountField" promptText="Destination account"
                                               GridPane.columnIndex="2" GridPane.rowIndex="1"
                                               maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                    <Label text="Amount (KES):" GridPane.columnIndex="3" GridPane.rowIndex="0"
                                           styleClass="form-label"/>
                                    <TextField fx:id="transferAmountField" promptText="0.00"
                                               GridPane.columnIndex="3" GridPane.rowIndex="1"
                                               maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                    <Button text="ðŸ”„ Transfer" styleClass="btn-primary" minWidth="110" prefWidth="120"
                                            GridPane.columnIndex="4" GridPane.rowIndex="1"/>

                                    <columnConstraints>
                                        <ColumnConstraints minWidth="150" percentWidth="28" hgrow="ALWAYS"/>
                                        <ColumnConstraints minWidth="30" prefWidth="40"/>
                                        <ColumnConstraints minWidth="150" percentWidth="28" hgrow="ALWAYS"/>
                                        <ColumnConstraints minWidth="120" percentWidth="22" hgrow="ALWAYS"/>
                                        <ColumnConstraints minWidth="110" prefWidth="120"/>
                                    </columnConstraints>
                                </GridPane>
                            </VBox>
                        </TitledPane>

                        <!-- Transaction History -->
                        <TitledPane text="Transaction History" collapsible="false" styleClass="table-section"
                                    VBox.vgrow="ALWAYS" maxHeight="Infinity">
                            <VBox spacing="10" VBox.vgrow="ALWAYS">
                                <!-- Filter Controls -->
                                <HBox spacing="15" alignment="CENTER_LEFT">
                                    <padding>
                                        <Insets top="10" right="10" bottom="10" left="10"/>
                                    </padding>
                                    <Label text="Filter by Account:" styleClass="form-label"/>
                                    <TextField promptText="Enter account number" minWidth="150" HBox.hgrow="ALWAYS"/>
                                    <Button text="ðŸ” Search" styleClass="btn-primary" minWidth="90" prefWidth="100"/>
                                    <Button text="ðŸ“Š View All" styleClass="btn-secondary" minWidth="90" prefWidth="100"/>
                                </HBox>

                                <!-- Transaction Table -->
                                <TableView VBox.vgrow="ALWAYS" maxHeight="Infinity">
                                    <columns>
                                        <TableColumn text="ID" minWidth="50" prefWidth="60"/>
                                        <TableColumn text="Date &amp; Time" minWidth="130" prefWidth="150"/>
                                        <TableColumn text="Account Number" minWidth="120" prefWidth="140"/>
                                        <TableColumn text="Type" minWidth="100" prefWidth="110"/>
                                        <TableColumn text="Amount (KES)" minWidth="100" prefWidth="120"/>
                                        <TableColumn text="Balance After" minWidth="100" prefWidth="120"/>
                                        <TableColumn text="Reference" minWidth="150" prefWidth="170"/>
                                        <TableColumn text="Description" minWidth="150" prefWidth="180"/>
                                    </columns>
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                                    </columnResizePolicy>
                                </TableView>
                            </VBox>
                        </TitledPane>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- Tab 3: Loans -->
            <Tab text="ðŸ  Loans">
                <ScrollPane fitToWidth="true" fitToHeight="true" hbarPolicy="NEVER">
                    <VBox spacing="15" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <!-- Loan Application Form -->
                        <TitledPane text="Loan Application" collapsible="false" styleClass="form-section">
                            <GridPane hgap="15" vgap="12">
                                <padding>
                                    <Insets top="15" right="15" bottom="15" left="15"/>
                                </padding>

                                <Label text="*Account Number:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="form-label"/>
                                <TextField promptText="ACC-YYYYMMDD-XXXX" GridPane.columnIndex="1" GridPane.rowIndex="0"
                                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <Label text="*Loan Type:" GridPane.columnIndex="2" GridPane.rowIndex="0" styleClass="form-label"/>
                                <ComboBox promptText="Select loan type" maxWidth="Infinity"
                                          GridPane.columnIndex="3" GridPane.rowIndex="0" GridPane.hgrow="ALWAYS">
                                    <items>
                                        <FXCollections fx:factory="observableArrayList">
                                            <String fx:value="PERSONAL"/>
                                            <String fx:value="MORTGAGE"/>
                                            <String fx:value="AUTO"/>
                                            <String fx:value="BUSINESS"/>
                                        </FXCollections>
                                    </items>
                                </ComboBox>

                                <Label text="*Principal Amount (KES):" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="form-label"/>
                                <TextField promptText="0.00" GridPane.columnIndex="1" GridPane.rowIndex="1"
                                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <Label text="*Interest Rate (%):" GridPane.columnIndex="2" GridPane.rowIndex="1" styleClass="form-label"/>
                                <TextField promptText="5.5" GridPane.columnIndex="3" GridPane.rowIndex="1"
                                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <Label text="*Term (Months):" GridPane.columnIndex="0" GridPane.rowIndex="2" styleClass="form-label"/>
                                <TextField promptText="12" GridPane.columnIndex="1" GridPane.rowIndex="2"
                                           maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <Label text="Start Date:" GridPane.columnIndex="2" GridPane.rowIndex="2" styleClass="form-label"/>
                                <DatePicker maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="2" GridPane.hgrow="ALWAYS"/>

                                <Label text="Purpose:" GridPane.columnIndex="0" GridPane.rowIndex="3" styleClass="form-label"
                                       GridPane.valignment="TOP">
                                    <padding>
                                        <Insets top="8"/>
                                    </padding>
                                </Label>
                                <TextArea promptText="Loan purpose description" prefRowCount="2" wrapText="true"
                                          GridPane.columnIndex="1" GridPane.rowIndex="3" GridPane.columnSpan="3"
                                          maxWidth="Infinity" GridPane.hgrow="ALWAYS"/>

                                <columnConstraints>
                                    <ColumnConstraints minWidth="120" percentWidth="18"/>
                                    <ColumnConstraints minWidth="150" percentWidth="32" hgrow="ALWAYS"/>
                                    <ColumnConstraints minWidth="120" percentWidth="18"/>
                                    <ColumnConstraints minWidth="150" percentWidth="32" hgrow="ALWAYS"/>
                                </columnConstraints>
                            </GridPane>
                        </TitledPane>

                        <!-- Loan Action Buttons -->
                        <HBox spacing="10" alignment="CENTER">
                            <padding>
                                <Insets top="10" bottom="10"/>
                            </padding>
                            <Button text="ðŸ“ Apply for Loan" styleClass="btn-success" minWidth="120" prefWidth="140"/>
                            <Button text="âœ… Approve Loan" styleClass="btn-primary" minWidth="120" prefWidth="140"/>
                            <Button text="ðŸ’³ Make Payment" styleClass="btn-warning" minWidth="120" prefWidth="140"/>
                            <Button text="ðŸ”„ Clear Form" styleClass="btn-secondary" minWidth="120" prefWidth="140"/>
                        </HBox>

                        <!-- Loans Table -->
                        <TitledPane text="All Loans" collapsible="false" styleClass="table-section"
                                    VBox.vgrow="ALWAYS" maxHeight="Infinity">
                            <TableView VBox.vgrow="ALWAYS" maxHeight="Infinity">
                                <columns>
                                    <TableColumn text="Loan ID" minWidth="60" prefWidth="70"/>
                                    <TableColumn text="Account Number" minWidth="120" prefWidth="140"/>
                                    <TableColumn text="Loan Type" minWidth="90" prefWidth="100"/>
                                    <TableColumn text="Principal (KES)" minWidth="100" prefWidth="120"/>
                                    <TableColumn text="Interest Rate" minWidth="90" prefWidth="100"/>
                                    <TableColumn text="Term (Months)" minWidth="90" prefWidth="100"/>
                                    <TableColumn text="Monthly Payment" minWidth="100" prefWidth="120"/>
                                    <TableColumn text="Remaining Balance" minWidth="100" prefWidth="130"/>
                                    <TableColumn text="Status" minWidth="80" prefWidth="100"/>
                                    <TableColumn text="Start Date" minWidth="90" prefWidth="100"/>
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                                </columnResizePolicy>
                            </TableView>
                        </TitledPane>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- Tab 4: Reports -->
            <Tab text="ðŸ“Š Reports">
                <ScrollPane fitToWidth="true" fitToHeight="true" hbarPolicy="NEVER">
                    <VBox spacing="15" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <Label text="Reports &amp; Analytics" styleClass="page-title">
                            <font>
                                <Font name="System Bold" size="18"/>
                            </font>
                        </Label>

                        <!-- Report Options -->
                        <TitledPane text="Generate Reports" collapsible="false" styleClass="form-section">
                            <VBox spacing="15">
                                <padding>
                                    <Insets top="15" right="15" bottom="15" left="15"/>
                                </padding>

                                <GridPane hgap="10" vgap="10">
                                    <Label text="Report Type:" GridPane.columnIndex="0" GridPane.rowIndex="0"
                                           styleClass="form-label" minWidth="100"/>
                                    <ComboBox promptText="Select report type" maxWidth="Infinity"
                                              GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.hgrow="ALWAYS">
                                        <items>
                                            <FXCollections fx:factory="observableArrayList">
                                                <String fx:value="Account Statement"/>
                                                <String fx:value="Transaction Summary"/>
                                                <String fx:value="Loan Portfolio"/>
                                                <String fx:value="Balance Report"/>
                                                <String fx:value="All Accounts Summary"/>
                                            </FXCollections>
                                        </items>
                                    </ComboBox>
                                    <Label text="Account Number:" GridPane.columnIndex="2" GridPane.rowIndex="0"
                                           styleClass="form-label" minWidth="120"/>
                                    <TextField promptText="Optional for specific account" maxWidth="Infinity"
                                               GridPane.columnIndex="3" GridPane.rowIndex="0" GridPane.hgrow="ALWAYS"/>

                                    <Label text="Date Range:" GridPane.columnIndex="0" GridPane.rowIndex="1"
                                           styleClass="form-label" minWidth="100"/>
                                    <DatePicker promptText="From date" maxWidth="Infinity"
                                                GridPane.columnIndex="1" GridPane.rowIndex="1" GridPane.hgrow="ALWAYS"/>
                                    <Label text="to" GridPane.columnIndex="2" GridPane.rowIndex="1"
                                           GridPane.halignment="CENTER"/>
                                    <DatePicker promptText="To date" maxWidth="Infinity"
                                                GridPane.columnIndex="3" GridPane.rowIndex="1" GridPane.hgrow="ALWAYS"/>

                                    <Button text="ðŸ“„ Generate Report" styleClass="btn-primary" minWidth="130" prefWidth="150"
                                            GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                                    <Button text="ðŸ“¥ Export PDF" styleClass="btn-success" minWidth="110" prefWidth="120"
                                            GridPane.columnIndex="3" GridPane.rowIndex="2"/>

                                    <columnConstraints>
                                        <ColumnConstraints minWidth="100" prefWidth="120"/>
                                        <ColumnConstraints minWidth="150" percentWidth="35" hgrow="ALWAYS"/>
                                        <ColumnConstraints minWidth="80" prefWidth="120"/>
                                        <ColumnConstraints minWidth="150" percentWidth="35" hgrow="ALWAYS"/>
                                    </columnConstraints>
                                </GridPane>
                            </VBox>
                        </TitledPane>

                        <!-- Summary Statistics -->
                        <TitledPane text="Dashboard Summary" collapsible="false" styleClass="form-section">
                            <GridPane hgap="15" vgap="15">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>

                                <!-- Stat Cards Row 1 -->
                                <VBox spacing="5" styleClass="stat-card" GridPane.columnIndex="0" GridPane.rowIndex="0"
                                      GridPane.hgrow="ALWAYS" maxWidth="Infinity">
                                    <padding>
                                        <Insets top="15" right="15" bottom="15" left="15"/>
                                    </padding>
                                    <Label text="ðŸ“Š Total Accounts" styleClass="stat-label"/>
                                    <Label text="0" styleClass="stat-value">
                                        <font>
                                            <Font name="System Bold" size="28"/>
                                        </font>
                                    </Label>
                                    <Label text="Active accounts in system" styleClass="stat-description" wrapText="true"/>
                                </VBox>

                                <VBox spacing="5" styleClass="stat-card" GridPane.columnIndex="1" GridPane.rowIndex="0"
                                      GridPane.hgrow="ALWAYS" maxWidth="Infinity">
                                    <padding>
                                        <Insets top="15" right="15" bottom="15" left="15"/>
                                    </padding>
                                    <Label text="ðŸ’° Total Balance" styleClass="stat-label"/>
                                    <Label text="KES 0.00" styleClass="stat-value">
                                        <font>
                                            <Font name="System Bold" size="28"/>
                                        </font>
                                    </Label>
                                    <Label text="Sum of all account balances" styleClass="stat-description" wrapText="true"/>
                                </VBox>

                                <VBox spacing="5" styleClass="stat-card" GridPane.columnIndex="2" GridPane.rowIndex="0"
                                      GridPane.hgrow="ALWAYS" maxWidth="Infinity">
                                    <padding>
                                        <Insets top="15" right="15" bottom="15" left="15"/>
                                    </padding>
                                    <Label text="ðŸ“ˆ Total Transactions" styleClass="stat-label"/>
                                    <Label text="0" styleClass="stat-value">
                                        <font>
                                            <Font name="System Bold" size="28"/>
                                        </font>
                                    </Label>
                                    <Label text="All time transaction count" styleClass="stat-description" wrapText="true"/>
                                </VBox>

                                <!-- Stat Cards Row 2 -->
                                <VBox spacing="5" styleClass="stat-card" GridPane.columnIndex="0" GridPane.rowIndex="1"
                                      GridPane.hgrow="ALWAYS" maxWidth="Infinity">
                                    <padding>
                                        <Insets top="15" right="15" bottom="15" left="15"/>
                                    </padding>
                                    <Label text="ðŸ  Active Loans" styleClass="stat-label"/>
                                    <Label text="0" styleClass="stat-value">
                                        <font>
                                            <Font name="System Bold" size="28"/>
                                        </font>
                                    </Label>
                                    <Label text="Loans currently active" styleClass="stat-description" wrapText="true"/>
                                </VBox>

                                <VBox spacing="5" styleClass="stat-card" GridPane.columnIndex="1" GridPane.rowIndex="1"
                                      GridPane.hgrow="ALWAYS" maxWidth="Infinity">
                                    <padding>
                                        <Insets top="15" right="15" bottom="15" left="15"/>
                                    </padding>
                                    <Label text="ðŸ’µ Total Deposits" styleClass="stat-label"/>
                                    <Label text="KES 0.00" styleClass="stat-value">
                                        <font>
                                            <Font name="System Bold" size="28"/>
                                        </font>
                                    </Label>
                                    <Label text="Sum of all deposits" styleClass="stat-description" wrapText="true"/>
                                </VBox>

                                <VBox spacing="5" styleClass="stat-card" GridPane.columnIndex="2" GridPane.rowIndex="1"
                                      GridPane.hgrow="ALWAYS" maxWidth="Infinity">
                                    <padding>
                                        <Insets top="15" right="15" bottom="15" left="15"/>
                                    </padding>
                                    <Label text="ðŸ’¸ Total Withdrawals" styleClass="stat-label"/>
                                    <Label text="KES 0.00" styleClass="stat-value">
                                        <font>
                                            <Font name="System Bold" size="28"/>
                                        </font>
                                    </Label>
                                    <Label text="Sum of all withdrawals" styleClass="stat-description" wrapText="true"/>
                                </VBox>

                                <columnConstraints>
                                    <ColumnConstraints minWidth="200" percentWidth="33.33" hgrow="ALWAYS"/>
                                    <ColumnConstraints minWidth="200" percentWidth="33.33" hgrow="ALWAYS"/>
                                    <ColumnConstraints minWidth="200" percentWidth="33.34" hgrow="ALWAYS"/>
                                </columnConstraints>
                            </GridPane>
                        </TitledPane>

                        <!-- Report Display Area -->
                        <TitledPane text="Report Output" collapsible="false" styleClass="table-section"
                                    VBox.vgrow="ALWAYS" maxHeight="Infinity">
                            <TextArea editable="false" wrapText="true" VBox.vgrow="ALWAYS" maxHeight="Infinity"
                                      promptText="Generated reports will be displayed here..."/>
                        </TitledPane>
                    </VBox>
                </ScrollPane>
            </Tab>
        </TabPane>
    </center>

    <!-- Bottom: Status Bar -->
    <bottom>
        <HBox styleClass="status-bar" alignment="CENTER_LEFT" spacing="20">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>
            <Label text="ðŸŸ¢ Connected to Database" styleClass="status-text"/>
            <Separator orientation="VERTICAL"/>
            <Label text="Banking System v1.0" styleClass="status-text"/>
            <Separator orientation="VERTICAL"/>
            <Label fx:id="statusLabel" text="Ready" styleClass="status-text" HBox.hgrow="ALWAYS"/>
        </HBox>
    </bottom>

</BorderPane>